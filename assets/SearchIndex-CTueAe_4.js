import{r as o,j as e}from"./index-BOpPmfz1.js";const g=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"m21 21-4.35-4.35"})]}),A=()=>e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})}),K=()=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),M=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),B=()=>{const[n,y]=o.useState(""),[l,m]=o.useState([]),[x,v]=o.useState(!1),[p,d]=o.useState(""),[u,w]=o.useState(new Set),[i,h]=o.useState({}),b="AIzaSyBKfy2qoaxzxBRs7WbMXznGJIxshxKPK-A",N=async()=>{if(n.trim()){v(!0),d(""),m([]),h({});try{const s=await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&videoCaption=closedCaption&q="${encodeURIComponent(n)}" english&maxResults=6&key=${b}`);if(!s.ok)throw new Error("API request failed");const t=await s.json();t.items&&t.items.length>0?m(t.items):d("KhÃ´ng tÃ¬m tháº¥y video nÃ o. Thá»­ tá»« khÃ³a khÃ¡c.")}catch(s){d("Lá»—i khi tÃ¬m kiáº¿m. Kiá»ƒm tra API key hoáº·c thá»­ láº¡i."),console.error("Search error:",s)}finally{v(!1)}}},I=s=>{s.key==="Enter"&&N()},S=async s=>{w(t=>new Set(t).add(s)),await new Promise(t=>setTimeout(t,2e3));try{const t=Math.floor(Math.random()*5)+2,a=600,j=[],f=new Set,k=[`"...and the word '${n}' means..."`,`"...let's talk about '${n}'..."`,`"...using '${n}' in a sentence..."`,`"...how to pronounce '${n}'..."`,`"...'${n}' is commonly used when..."`,`"...the meaning of '${n}' is..."`,`"...you can say '${n}' like this..."`,`"...here's another example with '${n}'..."`];for(let r=0;r<t;r++){let c;do c=Math.floor(Math.random()*a);while(f.has(c));f.add(c),j.push({time:c,text:k[Math.floor(Math.random()*k.length)]})}j.sort((r,c)=>r.time-c.time),h(r=>({...r,[s]:j}))}catch(t){console.error("Analysis error:",t),h(a=>({...a,[s]:[]}))}finally{w(t=>{const a=new Set(t);return a.delete(s),a})}},$=(s,t)=>{const a=document.getElementById(`yt-${s}`);a&&(a.src=`https://www.youtube.com/embed/${s}?start=${t}&autoplay=1`)},T=s=>{const t=Math.floor(s/60),a=Math.floor(s%60);return`${t}:${a.toString().padStart(2,"0")}`},C=()=>{y(""),m([]),h({}),d("")};return e.jsx("div",{className:"video-search-container",children:e.jsxs("div",{className:"container",children:[e.jsxs("header",{className:"header",children:[e.jsx("h1",{children:"YouTube Word Finder"}),e.jsx("p",{children:"TÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch tá»« vá»±ng trong video YouTube"})]}),e.jsx("div",{className:"search-section",children:e.jsxs("div",{className:"search-bar",children:[e.jsx("button",{onClick:N,disabled:x||!n.trim(),className:"search-button","aria-label":"TÃ¬m kiáº¿m",children:x?e.jsx("div",{className:"spinner"}):e.jsx(g,{})}),e.jsx("input",{type:"text",value:n,onChange:s=>y(s.target.value),onKeyPress:I,placeholder:"Nháº­p tá»« tiáº¿ng Anh... (vÃ­ dá»¥: however, although, get along)",className:"search-input"}),n&&e.jsx("button",{onClick:C,className:"clear-button","aria-label":"XÃ³a",children:e.jsx(A,{})})]})}),p&&e.jsxs("div",{className:"error-message",children:[e.jsx(M,{}),e.jsx("span",{children:p})]}),l.length>0&&e.jsx("div",{className:"results-header",children:e.jsxs("div",{className:"results-info",children:[e.jsxs("span",{className:"search-term",children:["Káº¿t quáº£ cho: ",e.jsxs("strong",{children:['"',n,'"']})]}),e.jsxs("span",{className:"video-count",children:["(",l.length," video)"]})]})}),l.length>0&&e.jsx("div",{className:"video-grid",children:l.map(s=>e.jsxs("div",{className:"video-card",children:[e.jsxs("div",{className:"video-info",children:[e.jsx("h3",{className:"video-title",children:s.snippet.title}),e.jsx("p",{className:"video-channel",children:s.snippet.channelTitle})]}),e.jsx("div",{className:"video-player",children:e.jsx("iframe",{id:`yt-${s.id.videoId}`,src:`https://www.youtube.com/embed/${s.id.videoId}`,title:s.snippet.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),e.jsxs("div",{className:"video-actions",children:[e.jsx("button",{onClick:()=>S(s.id.videoId),disabled:u.has(s.id.videoId),className:`analyze-button ${u.has(s.id.videoId)?"loading":""}`,children:u.has(s.id.videoId)?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"small-spinner"}),"Äang phÃ¢n tÃ­ch..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{}),'TÃ¬m "',n,'" trong video']})}),i[s.id.videoId]&&i[s.id.videoId].length>0&&e.jsxs("div",{className:"timestamps-section",children:[e.jsxs("h4",{className:"timestamps-title",children:[e.jsx(K,{}),"TÃ¬m tháº¥y ",i[s.id.videoId].length," láº§n xuáº¥t hiá»‡n:"]}),e.jsx("div",{className:"timestamps-list",children:i[s.id.videoId].map((t,a)=>e.jsxs("button",{onClick:()=>$(s.id.videoId,t.time),className:"timestamp-button",children:[e.jsx("span",{className:"timestamp-time",children:T(t.time)}),e.jsx("span",{className:"timestamp-text",children:t.text})]},a))})]}),i[s.id.videoId]&&i[s.id.videoId].length===0&&e.jsx("div",{className:"no-results",children:"KhÃ´ng tÃ¬m tháº¥y tá»« nÃ y trong video"})]})]},s.id.videoId))}),l.length===0&&!x&&!p&&e.jsxs("div",{className:"empty-state",children:[e.jsx(g,{}),e.jsx("p",{className:"empty-title",children:n?`KhÃ´ng tÃ¬m tháº¥y video cho "${n}"`:"Báº¯t Ä‘áº§u tÃ¬m kiáº¿m"}),e.jsx("p",{className:"empty-subtitle",children:n?"Thá»­ tá»« khÃ³a khÃ¡c":"Nháº­p tá»« vá»±ng tiáº¿ng Anh Ä‘á»ƒ tÃ¬m video"})]})]})})};function W(){return console.log("ðŸŽ¯ SearchIndex Ä‘ang render..."),e.jsx(e.Fragment,{children:e.jsx("main",{className:"image image3",children:e.jsx("article",{children:e.jsx("div",{className:"table-search",children:e.jsx(B,{})})})})})}export{W as default};
